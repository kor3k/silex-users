{% extends "layout.html.twig" %}

{% block title parent() ~ ' - Intr switch' %}

{% block content %}

    {{ form_start( form ) }}
    <table>
        <tr>
            <th>name</th>
            <th>address</th>
            <th>uptime</th>
            <th>rx</th>
            <th>tx</th>
            <th>disconnect</th>
            <th></th>
        </tr>

    {% for user in form.users %}
        <tr>
            <td>{{ form_label( user.disabled , user.vars.value['name'] ) }}</td>
            <td>{{ user.vars.value['address'] | default( '' ) }}</td>
            <td>{{ user.vars.value['uptime'] }}</td>
            <td>{{ user.vars.value['bytes-in'] }}</td>
            <td>{{ user.vars.value['bytes-out'] }}</td>
            <td>{{ form_widget( user.disabled ) }}</td>
            <td>
                <div style="background-color: {{ user.vars.value['disabled'] ? 'red' : 'green' }}">&nbsp;</div>
            </td>
        </tr>
    {% endfor %}

        <tr>
            <td><button onclick="checkAllCheckboxes( $(this).parents('form') );return false;">all</button></td>
            <td><button onclick="uncheckAllCheckboxes( $(this).parents('form') );return false;">none</button></td>
            <td colspan="4" style="text-align: right;">{{ form_widget( form.save ) }}</td>
            <td></td>
        </tr>

    </table>
    {{ form_end( form ) }}

    <script>
        var checkAllCheckboxes   =   function( holder )
        {
            $( 'input[type=checkbox]' , holder ).each(
                    function()
                    {
                        $( this ).prop( 'checked' , true );
                    });
        }

        var uncheckAllCheckboxes   =   function( holder )
        {
            $( 'input[type=checkbox]' , holder ).each(
                    function()
                    {
                        $( this ).prop( 'checked' , false );
                    });
        }
    </script>
{% endblock content %}